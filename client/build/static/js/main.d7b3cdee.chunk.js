(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{20:function(e,t,n){},25:function(e,t,n){e.exports=n(39)},37:function(e,t,n){},39:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),s=n(21),o=n.n(s),u=n(22),i=n(5),c=n(11),l="LOGIN_REQUEST",p="LOGIN_SUCCESS",m="LOGIN_FAIL",g="LOGOUT_COMPLETE",d="LOGGED_IN",h="LOGGED_OUT",E="IN_PROGRESS";function f(e){return function(t){t({type:l}),fetch("/find",{method:"POST",headers:{"Content-Type":"application/json; charset=UTF-8"},body:JSON.stringify(e)}).then(function(e){e.ok&&e.json().then(function(e){e.validate?(localStorage.setItem("idToken",e.token),t(S(e.username))):t({type:m,msg:"User authentication failed."})})})}}function S(e){return{type:p,user:e}}function O(){return function(e){localStorage.removeItem("idToken"),e({type:g})}}var v=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{loginStatus:localStorage.getItem("idToken")?d:h},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case l:return Object.assign({},e,{loginStatus:E,errorMsg:"",currentUser:null});case p:return Object.assign({},e,{loginStatus:d,errorMsg:"",currentUser:t.user});case m:return Object.assign({},e,{loginStatus:h,errorMsg:t.msg,currentUser:null});case"LOGOUT_REQUEST":return Object.assign({},e,{loginStatus:E});case g:return Object.assign({},e,{loginStatus:h,errorMsg:"",currentUser:null});default:return e}},b="CREATEUSER_RESET",C="CREATEUSER_REQUEST",I="CREATEUSER_SUCCESS",w="CREATEUSER_FAIL",j={NONE:"NONE",IN_PROGRESS:"IN_PROGRESS",USER_CREATED:"USER_CREATED",FAILED:"FAILED"};function U(e){return function(t){var n=e.usernameInput,a=e.emailInput,r=e.passwordInput,s=e.passwordFieldsMatch,o=e.validEmail;n.length&&a.length&&r.length>5?s&&o&&(t({type:C,userCreationStatus:j.IN_PROGRESS}),fetch("/createUser",{method:"POST",headers:{"Content-Type":"application/json; charset=UTF-8"},body:JSON.stringify({username:n,email:a,password:r})}).then(function(e){e.ok&&e.json().then(function(e){e.err?t(y(e.err)):e.validate?(localStorage.setItem("idToken",e.token),t(S(e.username)),t({type:I})):t(y("Database error."))})})):t(y("All fields are required."))}}function y(e){return{type:w,msg:e}}var R=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{userCreationStatus:j.NONE},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case b:return{userCreationStatus:j.NONE,errorMsg:""};case C:return{userCreationStatus:j.IN_PROGRESS,errorMsg:""};case I:return{userCreationStatus:j.USER_CREATED};case w:return{userCreationStatus:j.FAILED,errorMsg:t.msg};default:return e}},T=Object(c.c)({userAuthentication:v,userCreation:R}),N=n(6),L=n(7),A=n(9),k=n(8),M=n(10),_=n(40),P=n(43),G=n(42),x=function(e){return r.a.createElement("header",null,e.isLoggedIn&&r.a.createElement("div",null,e.currentUser&&r.a.createElement("span",null,"Welcome, ",e.currentUser,".  "),r.a.createElement("span",{className:"button",onClick:function(){return e.logout()}},"Logout")))},D=Object(i.b)(function(e){var t=e.userAuthentication.loginStatus===d;return t&&e.userAuthentication.currentUser?{isLoggedIn:t,currentUser:e.userAuthentication.currentUser}:{isLoggedIn:t}},function(e){return{logout:function(){e(O())}}})(x),F=n(13),J=n(41),Q=(n(20),function(e){function t(e){var n;return Object(N.a)(this,t),(n=Object(A.a)(this,Object(k.a)(t).call(this,e))).state={usernameInput:"",passwordInput:""},n.loginUser=n.props.loginUser.bind(Object(F.a)(Object(F.a)(n))),n}return Object(M.a)(t,e),Object(L.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("section",{id:"login"},r.a.createElement("form",null,r.a.createElement("input",{type:"text",placeholder:"User Email",maxLength:"35",autoComplete:"email",value:this.state.usernameInput,onChange:function(t){return e.setState({usernameInput:t.target.value})}}),r.a.createElement("input",{type:"password",placeholder:"Password",maxLength:"14",autoComplete:"current-password",value:this.state.passwordInput,onChange:function(t){return e.setState({passwordInput:t.target.value})}}),r.a.createElement("div",null,r.a.createElement("span",{className:"button",onClick:function(t){return e.loginUser(e.state)}},r.a.createElement("span",{className:this.props.buttonClass},this.props.buttonText)),r.a.createElement("span",{className:"button",onClick:function(t){return e.props.history.push("/signup")}},"Create Account"))),this.props.loginStatus===d&&r.a.createElement(J.a,{to:"/home"}),this.props.errorMsg&&r.a.createElement("div",{className:"msg"},this.props.errorMsg))}}]),t}(r.a.Component)),B=Object(i.b)(function(e){var t=e.userAuthentication,n=t.loginStatus;return{loginStatus:n,errorMsg:t.errorMsg,buttonText:n===E?"\u25cc":"Login"}},function(e){return{loginUser:function(t){t.usernameInput&&t.passwordInput&&e(f({email:t.usernameInput,password:t.passwordInput}))}}})(Q),W=function(e){function t(){var e;return Object(N.a)(this,t),(e=Object(A.a)(this,Object(k.a)(t).call(this))).state={usernameInput:"",emailInput:"",passwordInput:"",confirmPasswordInput:"",passwordFieldsMatch:!0,passwordLongEnough:!0,validEmail:!0},e}return Object(M.a)(t,e),Object(L.a)(t,[{key:"componentDidMount",value:function(){this.props.reset()}},{key:"componentDidUpdate",value:function(){this.props.userCreationStatus===j.USER_CREATED&&this.props.history.push("/signin")}},{key:"render",value:function(){var e=this;return r.a.createElement("section",{id:"createAccount"},r.a.createElement("div",null,"Welcome! Please complete all fields."),r.a.createElement("form",null,r.a.createElement("input",{type:"text",placeholder:"Your name",maxLength:"20",autoComplete:"fname",value:this.state.usernameInput,onChange:function(t){return e.setState({usernameInput:t.target.value})}}),r.a.createElement("input",{type:"text",placeholder:"Email Address",maxLength:"35",autoComplete:"email",value:this.state.emailInput,onChange:function(t){e.setState({emailInput:t.target.value,validEmail:/.+@.+\..+/.test(t.target.value)})}}),r.a.createElement("input",{type:"password",placeholder:"Password",maxLength:"12",autoComplete:"new-password",value:this.state.passwordInput,onChange:function(t){e.setState({passwordInput:t.target.value,passwordFieldsMatch:t.target.value===e.state.confirmPasswordInput,passwordLongEnough:!t.target.value.length||t.target.value.length>5})}}),r.a.createElement("input",{type:"password",placeholder:"Confirm Password",maxLength:"12",autoComplete:"new-password",value:this.state.confirmPasswordInput,onChange:function(t){e.setState({confirmPasswordInput:t.target.value,passwordFieldsMatch:t.target.value===e.state.passwordInput})}}),r.a.createElement("div",{className:"msg"},!this.state.passwordFieldsMatch&&r.a.createElement("span",null,"Password fields must match."),!this.state.passwordLongEnough&&r.a.createElement("span",null,"Password must be at least 6 characters long."),!this.state.validEmail&&r.a.createElement("span",null,"Please enter a valid email address.")),r.a.createElement("div",null,r.a.createElement("span",{className:"button",onClick:function(t){return e.props.createAccount(e.state)}},this.props.buttonText),r.a.createElement("span",{className:"button",onClick:function(t){return e.props.history.push("/signin")}},"Back to Login"))),this.props.errorMsg&&r.a.createElement("div",{className:"msg"},this.props.errorMsg))}}]),t}(r.a.Component),q=Object(i.b)(function(e){var t=e.userCreation,n=t.userCreationStatus;return{userCreationStatus:n,errorMsg:t.errorMsg,buttonText:n===j.IN_PROGRESS?"\u25cc":"Create Account"}},function(e){return{createAccount:function(t){e(U(t))},reset:function(){e({type:b})}}})(W),Y=function(e){return r.a.createElement("div",null,"This is the home page")},z=(n(37),function(e){function t(){return Object(N.a)(this,t),Object(A.a)(this,Object(k.a)(t).apply(this,arguments))}return Object(M.a)(t,e),Object(L.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(D,null),r.a.createElement("main",null,r.a.createElement(_.a,null,r.a.createElement(P.a,null,r.a.createElement(G.a,{path:"/signin",component:B}),r.a.createElement(G.a,{path:"/signup",component:q}),r.a.createElement(G.a,{path:"/",component:function(e){var t=function(t){function n(){return Object(N.a)(this,n),Object(A.a)(this,Object(k.a)(n).apply(this,arguments))}return Object(M.a)(n,t),Object(L.a)(n,[{key:"render",value:function(){return this.props.loginStatus===d?r.a.createElement(e,null):r.a.createElement(J.a,{to:"/signin"})}}]),n}(r.a.Component);return Object(i.b)(function(e){return{loginStatus:e.userAuthentication.loginStatus}},function(e){return{}})(t)}(Y)})))))}}]),t}(r.a.Component)),H=Object(c.d)(T,Object(c.a)(u.a));o.a.render(r.a.createElement(i.a,{store:H},r.a.createElement(z,null)),document.getElementById("root"))}},[[25,2,1]]]);
//# sourceMappingURL=main.d7b3cdee.chunk.js.map